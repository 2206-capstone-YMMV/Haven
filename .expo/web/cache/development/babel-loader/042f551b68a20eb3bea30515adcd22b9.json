{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { db } from \"../firebase\";\nimport { auth } from \"../firebase\";\nimport { collection, onSnapshot, query, where, addDoc, getDocs } from \"firebase/firestore\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Input(_ref) {\n  var commentId = _ref.commentId;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      displayName = _useState4[0],\n      setDisplayName = _useState4[1];\n\n  var submit = function submit() {\n    addDoc(collection(db, \"Comments\"), {\n      commentId: commentId,\n      timestamp: Date.now(),\n      content: displayName + \": \" + text\n    }).then(function () {\n      setText(\"\");\n    }).catch(function (error) {\n      return alert(error.message);\n    });\n  };\n\n  if (!displayName) {\n    var _auth$currentUser;\n\n    getDocs(query(collection(db, \"users\"), where(\"uid\", \"==\", (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid))).then(function (user) {\n      console.log(\"Grabbing Username\"), setDisplayName(user.docs[0].data().name);\n    });\n  }\n\n  return _jsx(KeyboardAvoidingView, {\n    behavior: \"position\",\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(TextInput, {\n        placeholder: \"add a comment\",\n        keyboardType: \"twitter\",\n        style: styles.input,\n        autoFocus: true,\n        value: text,\n        onChangeText: function onChangeText(text) {\n          return setText(text);\n        }\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: submit,\n        children: _jsx(Text, {\n          style: [styles.text, !text ? styles.inactive : []],\n          children: \"Post\"\n        })\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#FFF\",\n    flexDirection: \"row\",\n    borderTopWidth: 1,\n    borderColor: \"#EEE\",\n    alignItems: \"center\",\n    paddingLeft: 15\n  },\n  button: {\n    height: 40,\n    paddingHorizontal: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  input: {\n    flex: 1,\n    height: 40,\n    fontSize: 15\n  },\n  inactive: {\n    color: \"#CCC\"\n  },\n  text: {\n    color: \"#3F51B5\",\n    fontWeight: \"bold\",\n    fontFamily: \"Avenir\",\n    textAlign: \"center\",\n    fontSize: 15\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","db","auth","collection","onSnapshot","query","where","addDoc","getDocs","Input","commentId","text","setText","displayName","setDisplayName","submit","timestamp","Date","now","content","then","catch","error","alert","message","currentUser","uid","user","console","log","docs","data","name","styles","container","input","button","inactive","StyleSheet","create","backgroundColor","flexDirection","borderTopWidth","borderColor","alignItems","paddingLeft","height","paddingHorizontal","justifyContent","flex","fontSize","color","fontWeight","fontFamily","textAlign"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/Input.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  TextInput,\r\n  Text,\r\n  View,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n} from \"react-native\";\r\nimport { db } from \"../firebase\";\r\nimport { auth } from \"../firebase\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\n\r\nexport default function Input({ commentId }) {\r\n  const [text, setText] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n\r\n  const submit = () => {\r\n    addDoc(collection(db, \"Comments\"), {\r\n      commentId,\r\n      timestamp: Date.now(),\r\n      content: `${displayName}: ${text}`,\r\n    })\r\n      .then(() => {\r\n        setText(\"\");\r\n      })\r\n      .catch((error) => alert(error.message));\r\n  };\r\n\r\n  if (!displayName) {\r\n    getDocs(\r\n      query(collection(db, \"users\"), where(\"uid\", \"==\", auth.currentUser?.uid))\r\n    ).then((user) => {\r\n      console.log(\"Grabbing Username\"),\r\n        setDisplayName(user.docs[0].data().name);\r\n    });\r\n  }\r\n  return (\r\n    <KeyboardAvoidingView behavior=\"position\">\r\n      <View style={styles.container}>\r\n        <TextInput\r\n          placeholder=\"add a comment\"\r\n          keyboardType=\"twitter\"\r\n          style={styles.input}\r\n          autoFocus={true}\r\n          value={text}\r\n          onChangeText={(text) => setText(text)}\r\n        />\r\n        <TouchableOpacity style={styles.button} onPress={submit}>\r\n          <Text style={[styles.text, !text ? styles.inactive : []]}>Post</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#FFF\",\r\n    flexDirection: \"row\",\r\n    borderTopWidth: 1,\r\n    borderColor: \"#EEE\",\r\n    alignItems: \"center\",\r\n    paddingLeft: 15,\r\n  },\r\n  button: {\r\n    height: 40,\r\n    paddingHorizontal: 20,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    height: 40,\r\n    fontSize: 15,\r\n  },\r\n  inactive: {\r\n    color: \"#CCC\",\r\n  },\r\n  text: {\r\n    color: \"#3F51B5\",\r\n    fontWeight: \"bold\",\r\n    fontFamily: \"Avenir\",\r\n    textAlign: \"center\",\r\n    fontSize: 15,\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}