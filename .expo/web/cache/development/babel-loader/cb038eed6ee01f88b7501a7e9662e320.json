{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport React, { useEffect, useState } from 'react';\nimport { db } from \"../firebase\";\nimport { auth } from \"../firebase\";\nimport { collection, onSnapshot, query, where, addDoc, deleteDoc, doc } from 'firebase/firestore';\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport { useNavigation } from '@react-navigation/core';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Friends = function Friends() {\n  var navigation = useNavigation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      friends = _useState6[0],\n      setFriends = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      friendId = _useState8[0],\n      setFriendId = _useState8[1];\n\n  var isFriend = false;\n  var colRef = collection(db, 'Friends');\n  var filterData = users.filter(function (user) {\n    return user.name.indexOf(search) >= 0;\n  });\n  useEffect(function () {\n    return onSnapshot(collection(db, 'users'), function (snapshot) {\n      return setUsers(snapshot.docs.map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id\n        });\n      }));\n    });\n  }, []);\n  useEffect(function () {\n    var _auth$currentUser;\n\n    return onSnapshot(query(collection(db, 'Friends'), where('uid', '==', (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid)), function (snapshot) {\n      return setFriends(snapshot.docs.map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id\n        });\n      }));\n    });\n  }, []);\n\n  var handleAddFriend = function handleAddFriend(friend) {\n    var _auth$currentUser2;\n\n    addDoc(colRef, {\n      id: friend.id,\n      uid: (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.uid,\n      friendEmail: friend.email,\n      friendName: friend.name,\n      friendRole: friend.role\n    }).then(function () {\n      navigation.navigate('Profile');\n    });\n  };\n\n  var removeFriend = function removeFriend(friend) {\n    deleteDoc(doc(db, 'Friends', friendId));\n  };\n\n  var reset = function reset() {\n    isFriend = false;\n  };\n\n  var renderFriend = function renderFriend(_ref) {\n    var item = _ref.item;\n    return _jsx(View, {\n      style: {\n        flexDirection: 'row',\n        padding: 20,\n        marginBottom: 20,\n        backgroundColor: 'white',\n        borderRadius: 12,\n        shadowColor: '#000',\n        shadowOffset: {\n          width: 0,\n          height: 10\n        },\n        shadowOpacity: 0.3,\n        shadowRadius: 20\n      },\n      children: _jsxs(View, {\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 22,\n            fontWeight: '700'\n          },\n          children: item.name\n        }), _jsx(Text, {\n          style: {\n            fontSize: 18,\n            opacity: 0.7\n          },\n          children: item.role\n        }), _jsxs(Text, {\n          style: {\n            fontSize: 14,\n            opacity: 0.8,\n            color: '#0099cc'\n          },\n          children: [item.email, \" \"]\n        }), friends.filter(function (friend) {\n          if (friend.friendEmail === item.email) {\n            isFriend = true;\n            setFriendId(friend.id);\n          }\n        }), isFriend === false ? _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return handleAddFriend(item);\n          },\n          children: _jsx(Text, {\n            children: \"Add Friend\"\n          })\n        }) : _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return removeFriend(item);\n          },\n          children: _jsx(Text, {\n            children: \"remove friend\"\n          })\n        }), reset()]\n      })\n    });\n  };\n\n  return _jsxs(View, {\n    children: [_jsxs(View, {\n      style: styles.searchWrapperStyle,\n      children: [_jsx(TextInput, {\n        style: styles.textInput,\n        value: search,\n        placeholder: \"Search By Name\",\n        underlineColorAndroid: \"transparent\",\n        onChangeText: function onChangeText(text) {\n          return setSearch(text);\n        }\n      }), _jsx(MaterialCommunityIcons, {\n        style: styles.iconStyle,\n        name: \"backspace-outline\",\n        size: 23,\n        onPress: function onPress() {\n          setSearch('');\n        }\n      })]\n    }), _jsx(FlatList, {\n      data: filterData,\n      contentContainerStyle: {\n        padding: 15\n      },\n      renderItem: renderFriend\n    })]\n  });\n};\n\nexport default Friends;\nvar styles = StyleSheet.create({\n  textInput: {\n    height: 50,\n    borderWidth: 1,\n    paddingLeft: 20,\n    margin: 5,\n    flex: 1,\n    fontSize: 16,\n    paddingVertical: 8,\n    paddingHorizontal: 0,\n    marginBottom: 30,\n    borderColor: '#009688',\n    backgroundColor: 'white'\n  },\n  iconStyle: {\n    marginTop: 12,\n    marginHorizontal: 8\n  },\n  searchWrapperStyle: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","db","auth","collection","onSnapshot","query","where","addDoc","deleteDoc","doc","MaterialCommunityIcons","useNavigation","Friends","navigation","users","setUsers","search","setSearch","friends","setFriends","friendId","setFriendId","isFriend","colRef","filterData","filter","user","name","indexOf","snapshot","docs","map","data","id","currentUser","uid","handleAddFriend","friend","friendEmail","email","friendName","friendRole","role","then","navigate","removeFriend","reset","renderFriend","item","flexDirection","padding","marginBottom","backgroundColor","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","fontSize","fontWeight","opacity","color","styles","searchWrapperStyle","textInput","text","iconStyle","StyleSheet","create","borderWidth","paddingLeft","margin","flex","paddingVertical","paddingHorizontal","borderColor","marginTop","marginHorizontal","justifyContent"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/Fridens.js"],"sourcesContent":["import { StyleSheet, Text, View, FlatList, TouchableOpacity,TextInput, Image } from 'react-native'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { db } from '../firebase'\r\nimport { auth } from '../firebase'\r\nimport { collection, onSnapshot, query, where, addDoc, deleteDoc, doc } from 'firebase/firestore' \r\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons'\r\nimport { useNavigation } from '@react-navigation/core'\r\n\r\n\r\nconst Friends = () => {\r\n    const navigation = useNavigation()\r\n    const [users, setUsers] = useState([])\r\n    const [search, setSearch] = useState('')\r\n    const [friends, setFriends] = useState([])\r\n    const [friendId, setFriendId] = useState('')\r\n    let isFriend = false\r\n    const colRef = collection(db, 'Friends')\r\n    \r\n    const filterData = users.filter((user) => {\r\n        return user.name.indexOf(search) >= 0\r\n    })\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(collection(db, 'users'), (snapshot) =>\r\n            setUsers(snapshot.docs.map((doc) => ({...doc.data(), id: doc.id})))\r\n            )\r\n    ,[])\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(query(collection(db, 'Friends'), where('uid', '==', auth.currentUser?.uid)), (snapshot) =>\r\n            setFriends(snapshot.docs.map((doc) => ({...doc.data(), id: doc.id})))\r\n            )\r\n    ,[])\r\n\r\n    const handleAddFriend=  (friend) => {\r\n        addDoc(colRef, {\r\n            id: friend.id,\r\n            uid: auth.currentUser?.uid,\r\n            friendEmail: friend.email,\r\n            friendName: friend.name,\r\n            friendRole: friend.role\r\n          })\r\n        .then(() => {\r\n        \r\n            navigation.navigate('Profile')\r\n \r\n        })\r\n    }\r\n\r\n    const removeFriend = (friend) => {\r\n      deleteDoc(doc(db, 'Friends', friendId))\r\n    }\r\n    \r\n    const reset = () => {\r\n        isFriend = false\r\n    }\r\n\r\n    const renderFriend = (({item}) => {\r\n        return (\r\n            <View style={{flexDirection: 'row', padding: 20, marginBottom: 20, backgroundColor:'white', borderRadius: 12,\r\n            shadowColor: '#000', shadowOffset: {width:0, height: 10}, shadowOpacity: 0.3, shadowRadius: 20\r\n            }}>\r\n            <View>\r\n                <Text style={{fontSize: 22, fontWeight: '700'}}>{item.name}</Text>\r\n                <Text style={{fontSize: 18, opacity: 0.7}}>{item.role}</Text>\r\n                <Text style={{fontSize: 14, opacity: 0.8, color: '#0099cc'}}>{item.email} </Text>\r\n               {friends.filter((friend) => {\r\n                if (friend.friendEmail === item.email) {\r\n                    isFriend = true\r\n                    setFriendId(friend.id)\r\n                }\r\n                })}\r\n                {isFriend === false ?  <TouchableOpacity\r\n                  onPress={() => handleAddFriend(item)}\r\n                  >\r\n                  <Text >Add Friend</Text>\r\n                </TouchableOpacity> : <TouchableOpacity\r\n                  onPress={() => removeFriend(item)}\r\n                  >\r\n                  <Text >remove friend</Text>\r\n                </TouchableOpacity> \r\n                }\r\n                {reset()}\r\n            </View>\r\n        </View>\r\n        )\r\n    })\r\n  return (\r\n    <View>\r\n        {/* <Image\r\n            source={{uri:'https://i0.wp.com/artisthue.com/wp-content/uploads/2020/12/Story-sale-for-@kbellemichelle.jpg'}}\r\n            style={StyleSheet.absoluteFillObject}\r\n        /> */}\r\n            <View style={styles.searchWrapperStyle}>\r\n                <TextInput \r\n                style={styles.textInput}\r\n                value={search}\r\n                placeholder='Search By Name'\r\n                underlineColorAndroid='transparent'\r\n                onChangeText={(text) => setSearch(text)}\r\n                />\r\n                <MaterialCommunityIcons style={styles.iconStyle} name=\"backspace-outline\"  size={23}onPress={() => {\r\n                    setSearch('');\r\n                }} /> \r\n            </View>\r\n            <FlatList \r\n                data={filterData}\r\n                contentContainerStyle={{\r\n                    padding: 15\r\n                }}\r\n                renderItem={renderFriend}\r\n            />\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default Friends\r\n\r\nconst styles = StyleSheet.create({\r\n    textInput: {\r\n        height: 50,\r\n        borderWidth: 1,\r\n        paddingLeft: 20,\r\n        margin: 5,\r\n        flex: 1,\r\n        fontSize: 16,\r\n        paddingVertical: 8,\r\n        paddingHorizontal: 0,\r\n        marginBottom: 30,\r\n        borderColor: '#009688',\r\n        backgroundColor: 'white',\r\n\r\n      },\r\n      iconStyle: {\r\n        marginTop: 12,\r\n        marginHorizontal: 8,\r\n      },\r\n      searchWrapperStyle: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n      },\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}