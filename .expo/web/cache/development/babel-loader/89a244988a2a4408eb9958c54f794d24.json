{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { signOut } from 'firebase/auth';\nimport { auth } from \"../firebase\";\nimport { db } from \"../firebase\";\nimport { collection, onSnapshot, query, where } from 'firebase/firestore';\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Profile = function Profile(_ref) {\n  var _auth$currentUser;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      profile = _useState2[0],\n      setProfile = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      friends = _useState6[0],\n      setFriends = _useState6[1];\n\n  var colRef = query(collection(db, 'Friends'), where('uid', '==', (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid));\n  var filterData = friends.filter(function (friend) {\n    return friend.friendName.indexOf(search) >= 0;\n  });\n\n  var handleSignOut = function handleSignOut() {\n    signOut(auth).then(function () {\n      navigation.navigate('Login');\n    });\n  };\n\n  useEffect(function () {\n    var _auth$currentUser2;\n\n    return onSnapshot(query(collection(db, 'users'), where('uid', '==', (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.uid)), function (snapshot) {\n      return setProfile(snapshot.docs[0].data());\n    });\n  }, []);\n  useEffect(function () {\n    return onSnapshot(colRef, function (snapshot) {\n      return setFriends(snapshot.docs.map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id\n        });\n      }));\n    });\n  }, []);\n\n  var renderFriend = function renderFriend(_ref2) {\n    var item = _ref2.item;\n    return _jsx(View, {\n      style: {\n        flexDirection: 'row',\n        padding: 20,\n        marginBottom: 20,\n        backgroundColor: 'white',\n        borderRadius: 12,\n        shadowColor: '#000',\n        shadowOffset: {\n          width: 0,\n          height: 10\n        },\n        shadowOpacity: 0.3,\n        shadowRadius: 20\n      },\n      children: _jsxs(View, {\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 22,\n            fontWeight: '700'\n          },\n          children: item.friendName\n        }), _jsx(Text, {\n          style: {\n            fontSize: 18,\n            opacity: 0.7\n          },\n          children: item.friendRole\n        }), _jsxs(Text, {\n          style: {\n            fontSize: 14,\n            opacity: 0.8,\n            color: '#0099cc'\n          },\n          children: [item.friendEmail, \" \"]\n        })]\n      })\n    });\n  };\n\n  return _jsxs(View, {\n    children: [_jsxs(View, {\n      children: [_jsxs(View, {\n        style: styles.container,\n        children: [_jsxs(Text, {\n          style: styles.input,\n          children: [\"Hello, \", profile.name, \"!\"]\n        }), _jsxs(Text, {\n          style: styles.input,\n          children: [\"Role: \", profile.role]\n        }), _jsxs(Text, {\n          style: styles.input,\n          children: [\"Email: \", profile.email]\n        })]\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.navigate('EditProfile');\n        },\n        style: styles.button,\n        children: _jsx(Text, {\n          children: \"Edit Profile\"\n        })\n      }), _jsx(TouchableOpacity, {\n        onPress: handleSignOut,\n        style: styles.button,\n        children: _jsx(Text, {\n          children: \"Sign Out\"\n        })\n      })]\n    }), _jsxs(View, {\n      children: [_jsx(TextInput, {\n        style: styles.textInput,\n        value: search,\n        placeholder: \"Search By Name\",\n        underlineColorAndroid: \"transparent\",\n        onChangeText: function onChangeText(text) {\n          return setSearch(text);\n        }\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.navigate('Friends');\n        },\n        style: [styles.button],\n        children: _jsx(Text, {\n          children: \"Add/Remove Friend\"\n        })\n      }), _jsx(Text, {\n        children: \"My Friends: \"\n      }), _jsx(FlatList, {\n        data: filterData,\n        contentContainerStyle: {\n          padding: 15\n        },\n        renderItem: renderFriend\n      })]\n    })]\n  });\n};\n\nexport default Profile;\nvar styles = StyleSheet.create({\n  textInput: {\n    height: 50,\n    borderWidth: 1,\n    paddingLeft: 20,\n    margin: 5,\n    borderColor: '#009688',\n    backgroundColor: 'white'\n  },\n  input: {\n    backgroundColor: 'white',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    borderRadius: 10,\n    marginBottom: 5,\n    textAlign: 'center',\n    width: 'auto'\n  },\n  button: {\n    backgroundColor: '#0782F9',\n    width: '80%',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n    alignSelf: 'center',\n    marginBottom: 5\n  },\n  container: {\n    height: '40%',\n    width: '50%',\n    align: 'center'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","signOut","auth","db","collection","onSnapshot","query","where","MaterialCommunityIcons","Profile","navigation","profile","setProfile","search","setSearch","friends","setFriends","colRef","currentUser","uid","filterData","filter","friend","friendName","indexOf","handleSignOut","then","navigate","snapshot","docs","data","map","doc","id","renderFriend","item","flexDirection","padding","marginBottom","backgroundColor","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","fontSize","fontWeight","opacity","friendRole","color","friendEmail","styles","container","input","name","role","email","button","textInput","text","StyleSheet","create","borderWidth","paddingLeft","margin","borderColor","paddingHorizontal","paddingVertical","textAlign","alignItems","alignSelf","align"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Text, View, FlatList, TextInput, StyleSheet, TouchableOpacity, Image} from \"react-native\";\r\nimport { signOut } from 'firebase/auth'\r\nimport { auth } from '../firebase'\r\nimport { db } from '../firebase'\r\nimport { collection, onSnapshot, query, where } from 'firebase/firestore' \r\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons'\r\n\r\nconst  Profile = ({ navigation }) => {\r\n    const [profile, setProfile] = useState({})\r\n    const [search, setSearch] = useState('')\r\n    const [friends, setFriends] = useState([])\r\n    const colRef = query(collection(db, 'Friends'), where('uid', '==', auth.currentUser?.uid))\r\n\r\n    const filterData = friends.filter((friend) => {\r\n        return friend.friendName.indexOf(search) >= 0\r\n    })\r\n\r\n    const handleSignOut = () => {\r\n        signOut(auth)\r\n        .then(() => {\r\n            navigation.navigate('Login')\r\n        })\r\n    }\r\n\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(query(collection(db, 'users'), where('uid', '==', auth.currentUser?.uid)), (snapshot) =>\r\n            setProfile(snapshot.docs[0].data())\r\n            )\r\n    ,[])\r\n\r\n    useEffect(  \r\n        () => \r\n          onSnapshot(colRef, (snapshot) => \r\n          setFriends(snapshot.docs.map((doc) => ({...doc.data(), id: doc.id})))\r\n        \r\n        )\r\n      ,[])\r\n\r\n\r\n      const renderFriend = (({item}) => {\r\n        return (\r\n            <View style={{flexDirection: 'row', padding: 20, marginBottom: 20, backgroundColor:'white', borderRadius: 12,\r\n            shadowColor: '#000', shadowOffset: {width:0, height: 10}, shadowOpacity: 0.3, shadowRadius: 20\r\n            }}>\r\n            <View>\r\n                <Text style={{fontSize: 22, fontWeight: '700'}}>{item.friendName}</Text>\r\n                <Text style={{fontSize: 18, opacity: 0.7}}>{item.friendRole}</Text>\r\n                <Text style={{fontSize: 14, opacity: 0.8, color: '#0099cc'}}>{item.friendEmail} </Text>\r\n            </View>\r\n        </View>\r\n        )\r\n    })\r\n    return (\r\n        <View >\r\n            <View>\r\n              <View style={styles.container}>\r\n                <Text style={styles.input}>Hello, {profile.name}!</Text>\r\n                <Text style={styles.input}>Role: {profile.role}</Text>\r\n                <Text style={styles.input}>Email: {profile.email}</Text>\r\n              </View>\r\n                <TouchableOpacity onPress={() => navigation.navigate('EditProfile')}\r\n                    style={styles.button}>\r\n                    <Text>Edit Profile</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={handleSignOut}\r\n                    style={styles.button}>\r\n                    <Text>Sign Out</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n            <View>\r\n            <TextInput \r\n                style={styles.textInput}\r\n                value={search}\r\n                placeholder='Search By Name'\r\n                underlineColorAndroid='transparent'\r\n                onChangeText={(text) => setSearch(text)}\r\n                />\r\n                <TouchableOpacity\r\n                    onPress={() => navigation.navigate('Friends')}\r\n                    style={[styles.button]}\r\n                    >\r\n                    <Text >Add/Remove Friend</Text>\r\n                </TouchableOpacity>\r\n                <Text >My Friends: </Text>\r\n                <FlatList \r\n                    data={filterData}\r\n                    contentContainerStyle={{\r\n                        padding: 15\r\n                    }}\r\n                    renderItem={renderFriend}\r\n                />\r\n            </View>\r\n    </View>\r\n    )\r\n}\r\n\r\nexport default Profile\r\n\r\nconst styles = StyleSheet.create({\r\n    textInput: {\r\n      height: 50,\r\n      borderWidth: 1,\r\n      paddingLeft: 20,\r\n      margin: 5,\r\n      borderColor: '#009688',\r\n      backgroundColor: 'white'\r\n    },\r\n    input: {\r\n      backgroundColor: 'white',\r\n      paddingHorizontal: 15,\r\n      paddingVertical: 10,\r\n      borderRadius: 10,\r\n      marginBottom: 5,\r\n      textAlign: 'center',\r\n      width: 'auto'\r\n    },\r\n    button: {\r\n      backgroundColor: '#0782F9',\r\n      width: '80%',\r\n      padding: 15,\r\n      borderRadius: 10,\r\n      alignItems: 'center',\r\n      alignSelf: 'center',\r\n      marginBottom: 5\r\n    },\r\n    container: {\r\n      height: '40%',\r\n      width: '50%',\r\n      align: 'center'\r\n    }\r\n  })"],"mappings":"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"},"metadata":{},"sourceType":"module"}