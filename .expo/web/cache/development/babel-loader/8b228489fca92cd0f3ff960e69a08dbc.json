{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { auth } from \"../firebase\";\nimport { db } from \"../firebase\";\nimport { collection, onSnapshot, query, where } from 'firebase/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function MessagesTab(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      conversations = _useState2[0],\n      setConversations = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      people = _useState4[0],\n      setPeople = _useState4[1];\n\n  useEffect(function () {\n    var _auth$currentUser;\n\n    return onSnapshot(query(collection(db, 'Conversations'), where('user', '==', (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid)), function (snapshot) {\n      return setConversations(snapshot.docs.map(function (convo) {\n        console.log('Grabbing conversations');\n        return {\n          id: convo.id,\n          data: convo.data()\n        };\n      })).then(setPeople(conversations.map(function (convo) {\n        if (convo.user !== auth.currentUser.id) {\n          people.push({\n            id: convo.id,\n            userId: user\n          });\n        } else {\n          people.push({\n            id: convo.id,\n            userId: user\n          });\n        }\n      })));\n    });\n  }, []);\n  console.log(people);\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    children: [_jsx(Text, {\n      onPress: function onPress() {\n        return navigation.navigate('NewConversation', {\n          conversations: conversations\n        });\n      },\n      children: \"New Conversation\"\n    }), conversations.map(function (convo, index) {\n      return _jsxs(Text, {\n        onPress: function onPress() {\n          return navigation.navigate('Message', {\n            ConversationId: convo.id\n          });\n        },\n        children: [\"Conversation with \", convo.data.otherUser]\n      }, index);\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","auth","db","collection","onSnapshot","query","where","MessagesTab","navigation","conversations","setConversations","people","setPeople","currentUser","uid","snapshot","docs","map","convo","console","log","id","data","then","user","push","userId","flex","alignItems","justifyContent","navigate","index","ConversationId","otherUser"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/MessagesTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Text, View } from \"react-native\";\r\nimport { auth } from '../firebase'\r\nimport { db } from '../firebase'\r\nimport { collection, onSnapshot, query, where } from 'firebase/firestore' \r\n\r\nexport default function MessagesTab({ navigation }) {\r\n    const [conversations, setConversations] = useState([])\r\n    const [people, setPeople] = useState([])\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(query(collection(db, 'Conversations'), where('user', '==', auth.currentUser?.uid)), (snapshot) =>\r\n            setConversations(snapshot.docs.map(convo => {\r\n                console.log('Grabbing conversations')\r\n                return {id: convo.id, data: convo.data()}\r\n            }))\r\n            .then(setPeople(conversations.map(convo => {\r\n                if (convo.user !== auth.currentUser.id){\r\n                    people.push({id: convo.id, userId: user})\r\n                }\r\n                else{\r\n                    people.push({id: convo.id, userId: user})\r\n                }\r\n            })))\r\n            )\r\n    ,[])\r\n    \r\n    console.log(people)\r\n\r\n    \r\n\r\n\r\n    return (\r\n        <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center'}}>\r\n            <Text onPress={() => navigation.navigate('NewConversation', {conversations })}>New Conversation</Text>\r\n            {conversations.map((convo,index) => <Text key={index} onPress={() => navigation.navigate('Message', {ConversationId: convo.id})}>Conversation with {convo.data.otherUser}</Text>)}\r\n        </View>\r\n    )\r\n}"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;AAEA,SAASC,IAAT;AACA,SAASC,EAAT;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,KAAjC,EAAwCC,KAAxC,QAAqD,oBAArD;;;AAEA,eAAe,SAASC,WAAT,OAAqC;EAAA,IAAdC,UAAc,QAAdA,UAAc;;EAChD,gBAA0CR,QAAQ,CAAC,EAAD,CAAlD;EAAA;EAAA,IAAOS,aAAP;EAAA,IAAsBC,gBAAtB;;EACA,iBAA4BV,QAAQ,CAAC,EAAD,CAApC;EAAA;EAAA,IAAOW,MAAP;EAAA,IAAeC,SAAf;;EAEAb,SAAS,CACL;IAAA;;IAAA,OACIK,UAAU,CAACC,KAAK,CAACF,UAAU,CAACD,EAAD,EAAK,eAAL,CAAX,EAAkCI,KAAK,CAAC,MAAD,EAAS,IAAT,uBAAeL,IAAI,CAACY,WAApB,qBAAe,kBAAkBC,GAAjC,CAAvC,CAAN,EAAqF,UAACC,QAAD;MAAA,OAC/FL,gBAAgB,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,UAAAC,KAAK,EAAI;QACxCC,OAAO,CAACC,GAAR,CAAY,wBAAZ;QACA,OAAO;UAACC,EAAE,EAAEH,KAAK,CAACG,EAAX;UAAeC,IAAI,EAAEJ,KAAK,CAACI,IAAN;QAArB,CAAP;MACH,CAHgB,CAAD,CAAhB,CAICC,IAJD,CAIMX,SAAS,CAACH,aAAa,CAACQ,GAAd,CAAkB,UAAAC,KAAK,EAAI;QACvC,IAAIA,KAAK,CAACM,IAAN,KAAevB,IAAI,CAACY,WAAL,CAAiBQ,EAApC,EAAuC;UACnCV,MAAM,CAACc,IAAP,CAAY;YAACJ,EAAE,EAAEH,KAAK,CAACG,EAAX;YAAeK,MAAM,EAAEF;UAAvB,CAAZ;QACH,CAFD,MAGI;UACAb,MAAM,CAACc,IAAP,CAAY;YAACJ,EAAE,EAAEH,KAAK,CAACG,EAAX;YAAeK,MAAM,EAAEF;UAAvB,CAAZ;QACH;MACJ,CAPe,CAAD,CAJf,CAD+F;IAAA,CAArF,CADd;EAAA,CADK,EAgBR,EAhBQ,CAAT;EAkBAL,OAAO,CAACC,GAAR,CAAYT,MAAZ;EAKA,OACI,MAAC,IAAD;IAAM,KAAK,EAAE;MAAEgB,IAAI,EAAE,CAAR;MAAWC,UAAU,EAAE,QAAvB;MAAiCC,cAAc,EAAE;IAAjD,CAAb;IAAA,WACI,KAAC,IAAD;MAAM,OAAO,EAAE;QAAA,OAAMrB,UAAU,CAACsB,QAAX,CAAoB,iBAApB,EAAuC;UAACrB,aAAa,EAAbA;QAAD,CAAvC,CAAN;MAAA,CAAf;MAAA;IAAA,EADJ,EAEKA,aAAa,CAACQ,GAAd,CAAkB,UAACC,KAAD,EAAOa,KAAP;MAAA,OAAiB,MAAC,IAAD;QAAkB,OAAO,EAAE;UAAA,OAAMvB,UAAU,CAACsB,QAAX,CAAoB,SAApB,EAA+B;YAACE,cAAc,EAAEd,KAAK,CAACG;UAAvB,CAA/B,CAAN;QAAA,CAA3B;QAAA,iCAAgHH,KAAK,CAACI,IAAN,CAAWW,SAA3H;MAAA,GAAWF,KAAX,CAAjB;IAAA,CAAlB,CAFL;EAAA,EADJ;AAMH"},"metadata":{},"sourceType":"module"}