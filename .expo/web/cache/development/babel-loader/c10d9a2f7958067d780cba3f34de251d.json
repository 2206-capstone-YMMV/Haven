{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useEffect, useState } from 'react';\nimport { auth } from \"../firebase\";\nimport { useNavigation } from '@react-navigation/core';\nimport { db } from \"../firebase\";\nimport { collection, onSnapshot, query, where, updateDoc, doc } from 'firebase/firestore';\nimport DropDownPicker from \"react-native-dropdown-picker\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EditProfile = function EditProfile() {\n  var navigation = useNavigation();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      open = _useState4[0],\n      setOpen = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      role = _useState6[0],\n      setRole = _useState6[1];\n\n  var _useState7 = useState([{\n    label: \"User\",\n    value: \"user\"\n  }, {\n    label: \"Helper\",\n    value: \"helper\"\n  }]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      items = _useState8[0],\n      setItems = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      id = _useState10[0],\n      setId = _useState10[1];\n\n  var colRef = collection(db, 'users');\n  useEffect(function () {\n    var _auth$currentUser;\n\n    return onSnapshot(query(colRef, where('uid', '==', (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid)), function (snapshot) {\n      console.log('Grabbing Profile data');\n      var user = snapshot.docs[0].data();\n      setName(user.name);\n      setRole(user.role);\n      setId(snapshot.docs[0].id);\n    });\n  }, []);\n\n  var Edit = function Edit() {\n    updateDoc(doc(db, 'users', id), {\n      name: name,\n      role: role\n    }).then(navigation.navigate('Profile'));\n  };\n\n  var editAlert = function editAlert() {\n    Alert.alert(\"Is this edit ok?\", \"Name: \" + name + \", Role: \" + role, [{\n      text: \"Submit\",\n      onPress: function onPress() {\n        return Edit();\n      }\n    }, {\n      text: \"Cancel\",\n      style: \"cancel\"\n    }]);\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Full Name\",\n      onChangeText: function onChangeText(text) {\n        return setName(text);\n      }\n    }), _jsx(DropDownPicker, {\n      open: open,\n      value: role,\n      items: items,\n      setOpen: setOpen,\n      setValue: setRole,\n      setItems: setItems\n    }), _jsx(TouchableOpacity, {\n      onPress: editAlert,\n      style: [styles.button],\n      children: _jsx(Text, {\n        style: styles.buttonOutLineText,\n        children: \"Edit Profile\"\n      })\n    })]\n  });\n};\n\nexport default EditProfile;\nvar styles = StyleSheet.create({\n  input: {\n    backgroundColor: 'white',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    borderRadius: 10,\n    marginTop: 5\n  },\n  button: {\n    backgroundColor: '#0782F9',\n    width: '100%',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 5\n  },\n  buttonOutline: {\n    backgroundColor: 'white',\n    marginTop: 5,\n    borderColor: '#0782F9',\n    borderWidth: 2\n  },\n  container: {\n    paddingTop: '80%'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","auth","useNavigation","db","collection","onSnapshot","query","where","updateDoc","doc","DropDownPicker","EditProfile","navigation","name","setName","open","setOpen","role","setRole","label","value","items","setItems","id","setId","colRef","currentUser","uid","snapshot","console","log","user","docs","data","Edit","then","navigate","editAlert","Alert","alert","text","onPress","style","styles","container","input","button","buttonOutLineText","StyleSheet","create","backgroundColor","paddingHorizontal","paddingVertical","borderRadius","marginTop","width","padding","alignItems","buttonOutline","borderColor","borderWidth","paddingTop"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/EditProfile.js"],"sourcesContent":["import { StyleSheet, Text, View, TextInput, TouchableOpacity, Alert } from 'react-native'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { auth } from '../firebase'\r\nimport { useNavigation } from '@react-navigation/core'\r\nimport { db } from '../firebase'\r\nimport { collection, onSnapshot, query, where, updateDoc, doc} from 'firebase/firestore' \r\nimport DropDownPicker from \"react-native-dropdown-picker\";\r\n\r\nconst EditProfile = () => {\r\n    const navigation = useNavigation()\r\n\r\n    const [name, setName] = useState('')\r\n    const [open, setOpen] = useState(false);\r\n    const [role, setRole] = useState(\"\");\r\n    const [items, setItems] = useState([\r\n      { label: \"User\", value: \"user\" },\r\n      { label: \"Helper\", value: \"helper\" },\r\n    ]);\r\n    const [id, setId] = useState('')\r\n    const colRef = collection(db, 'users')\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(query(colRef, where('uid', '==', auth.currentUser?.uid)), (snapshot) => {\r\n            console.log('Grabbing Profile data')\r\n            let user = snapshot.docs[0].data()\r\n            setName(user.name)\r\n            setRole(user.role)\r\n            setId(snapshot.docs[0].id)\r\n        })\r\n    ,[])\r\n\r\n    const Edit = () => {\r\n        updateDoc(doc(db, 'users', id), {name, role})\r\n        .then(navigation.navigate('Profile'))\r\n    }\r\n\r\n    const editAlert = () => {\r\n      Alert.alert(\r\n        `Is this edit ok?`,\r\n        `Name: ${name}, Role: ${role}`,\r\n        [\r\n          {\r\n            text: \"Submit\",\r\n            onPress: () => Edit()\r\n          },\r\n          {\r\n            text: \"Cancel\",\r\n            style: \"cancel\"\r\n          }\r\n        ]\r\n      )\r\n    }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n\r\n        <TextInput style={styles.input} placeholder=\"Full Name\" onChangeText={text => setName(text)} />\r\n        <DropDownPicker\r\n        open={open}\r\n        value={role}\r\n        items={items}\r\n        setOpen={setOpen}\r\n        setValue={setRole}\r\n        setItems={setItems}\r\n      />\r\n\r\n        <TouchableOpacity\r\n            onPress={editAlert}\r\n            style={[styles.button]}\r\n        >\r\n            <Text style={styles.buttonOutLineText}>Edit Profile</Text>\r\n        </TouchableOpacity>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default EditProfile\r\n\r\nconst styles = StyleSheet.create({\r\n    input: {\r\n      backgroundColor: 'white',\r\n      paddingHorizontal: 15,\r\n      paddingVertical: 10,\r\n      borderRadius: 10,\r\n      marginTop: 5,\r\n    },\r\n    button: {\r\n      backgroundColor: '#0782F9',\r\n      width: '100%',\r\n      padding: 15,\r\n      borderRadius: 10,\r\n      alignItems: 'center',\r\n      marginTop: 5\r\n    },\r\n    buttonOutline: {\r\n      backgroundColor: 'white',\r\n      marginTop: 5,\r\n      borderColor: '#0782F9',\r\n      borderWidth: 2,\r\n    },\r\n    container: {\r\n      paddingTop: '80%'\r\n    }\r\n  })"],"mappings":"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"},"metadata":{},"sourceType":"module"}