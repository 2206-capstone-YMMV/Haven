{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Input from \"./Input\";\nimport { collection, getDocs, onSnapshot, query, where } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar SinglePost = function SinglePost(props) {\n  console.log(\"you are in singlepost view\");\n  var element = props.route.params.item;\n  var commentId = element.id;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      comments = _useState2[0],\n      setComments = _useState2[1];\n\n  useEffect(function () {\n    return onSnapshot(query(collection(db, \"Comments\"), where(\"commentId\", \"==\", commentId)), function (snapshot) {\n      return setComments(snapshot.docs.map(function (comment) {\n        console.log(\"grabbing comments\");\n        return comment.data();\n      }).sort(function (a, b) {\n        return a.timestamp - b.timestamp;\n      }));\n    });\n  }, []);\n  return _jsxs(View, {\n    children: [_jsxs(Text, {\n      children: [\"Post By: \", element.username]\n    }), _jsxs(Text, {\n      children: [\"Description: \", element.description]\n    }), _jsxs(Text, {\n      children: [\"Content: \", element.contents]\n    }), _jsx(Input, {\n      commentId: element.id\n    }), _jsx(View, {\n      style: styles.commentContainer,\n      children: comments.map(function (comment, idx) {\n        return _jsx(Text, {\n          style: styles.message,\n          children: comment.content\n        }, idx);\n      })\n    })]\n  });\n};\n\nvar mapState = function mapState(state) {\n  return {\n    userPost: state\n  };\n};\n\nexport default connect(mapState)(SinglePost);\nvar styles = StyleSheet.create({\n  commentContainer: {\n    alignSelf: \"flex-start\",\n    alignItems: \"left\",\n    paddingHorizontal: \"10%\"\n  },\n  message: {\n    backgroundColor: \"white\",\n    paddingVertical: 5,\n    paddingHorizontal: 5,\n    marginTop: 5,\n    borderRadius: 10\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","connect","Input","collection","getDocs","onSnapshot","query","where","db","SinglePost","props","console","log","element","route","params","item","commentId","id","comments","setComments","snapshot","docs","map","comment","data","sort","a","b","timestamp","username","description","contents","styles","commentContainer","idx","message","content","mapState","state","userPost","StyleSheet","create","alignSelf","alignItems","paddingHorizontal","backgroundColor","paddingVertical","marginTop","borderRadius"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/SinglePost.js"],"sourcesContent":["import { StyleSheet, Text, View } from \"react-native\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Input from \"./Input\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nconst SinglePost = (props) => {\r\n  console.log(\"you are in singlepost view\");\r\n  const element = props.route.params.item;\r\n  const commentId = element.id;\r\n  const [comments, setComments] = useState([]);\r\n\r\n  useEffect(\r\n    () =>\r\n      onSnapshot(\r\n        query(collection(db, \"Comments\"), where(\"commentId\", \"==\", commentId)),\r\n        (snapshot) =>\r\n          setComments(\r\n            snapshot.docs\r\n              .map((comment) => {\r\n                console.log(\"grabbing comments\");\r\n                return comment.data();\r\n              })\r\n              .sort((a, b) => a.timestamp - b.timestamp)\r\n          )\r\n      ),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <View>\r\n      <Text>Post By: {element.username}</Text>\r\n      <Text>Description: {element.description}</Text>\r\n      <Text>Content: {element.contents}</Text>\r\n      <Input commentId={element.id} />\r\n      <View style={styles.commentContainer}>\r\n        {comments.map((comment, idx) => (\r\n          <Text key={idx} style={styles.message}>\r\n            {comment.content}\r\n          </Text>\r\n        ))}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst mapState = (state) => {\r\n  return {\r\n    userPost: state,\r\n  };\r\n};\r\n\r\nexport default connect(mapState)(SinglePost);\r\n\r\nconst styles = StyleSheet.create({\r\n  commentContainer: {\r\n    alignSelf: \"flex-start\",\r\n    alignItems: \"left\",\r\n    paddingHorizontal: \"10%\",\r\n  },\r\n  message: {\r\n    backgroundColor: \"white\",\r\n    paddingVertical: 5,\r\n    paddingHorizontal: 5,\r\n    marginTop: 5,\r\n    borderRadius: 10,\r\n  },\r\n});\r\n"],"mappings":";;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP;AACA,SACEC,UADF,EAEEC,OAFF,EAGEC,UAHF,EAIEC,KAJF,EAKEC,KALF,QAMO,oBANP;AAOA,SAASC,EAAT;;;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;EAC5BC,OAAO,CAACC,GAAR,CAAY,4BAAZ;EACA,IAAMC,OAAO,GAAGH,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmBC,IAAnC;EACA,IAAMC,SAAS,GAAGJ,OAAO,CAACK,EAA1B;;EACA,gBAAgClB,QAAQ,CAAC,EAAD,CAAxC;EAAA;EAAA,IAAOmB,QAAP;EAAA,IAAiBC,WAAjB;;EAEArB,SAAS,CACP;IAAA,OACEM,UAAU,CACRC,KAAK,CAACH,UAAU,CAACK,EAAD,EAAK,UAAL,CAAX,EAA6BD,KAAK,CAAC,WAAD,EAAc,IAAd,EAAoBU,SAApB,CAAlC,CADG,EAER,UAACI,QAAD;MAAA,OACED,WAAW,CACTC,QAAQ,CAACC,IAAT,CACGC,GADH,CACO,UAACC,OAAD,EAAa;QAChBb,OAAO,CAACC,GAAR,CAAY,mBAAZ;QACA,OAAOY,OAAO,CAACC,IAAR,EAAP;MACD,CAJH,EAKGC,IALH,CAKQ,UAACC,CAAD,EAAIC,CAAJ;QAAA,OAAUD,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAA1B;MAAA,CALR,CADS,CADb;IAAA,CAFQ,CADZ;EAAA,CADO,EAcP,EAdO,CAAT;EAiBA,OACE,MAAC,IAAD;IAAA,WACE,MAAC,IAAD;MAAA,wBAAgBhB,OAAO,CAACiB,QAAxB;IAAA,EADF,EAEE,MAAC,IAAD;MAAA,4BAAoBjB,OAAO,CAACkB,WAA5B;IAAA,EAFF,EAGE,MAAC,IAAD;MAAA,wBAAgBlB,OAAO,CAACmB,QAAxB;IAAA,EAHF,EAIE,KAAC,KAAD;MAAO,SAAS,EAAEnB,OAAO,CAACK;IAA1B,EAJF,EAKE,KAAC,IAAD;MAAM,KAAK,EAAEe,MAAM,CAACC,gBAApB;MAAA,UACGf,QAAQ,CAACI,GAAT,CAAa,UAACC,OAAD,EAAUW,GAAV;QAAA,OACZ,KAAC,IAAD;UAAgB,KAAK,EAAEF,MAAM,CAACG,OAA9B;UAAA,UACGZ,OAAO,CAACa;QADX,GAAWF,GAAX,CADY;MAAA,CAAb;IADH,EALF;EAAA,EADF;AAeD,CAtCD;;AAwCA,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;EAC1B,OAAO;IACLC,QAAQ,EAAED;EADL,CAAP;AAGD,CAJD;;AAMA,eAAetC,OAAO,CAACqC,QAAD,CAAP,CAAkB7B,UAAlB,CAAf;AAEA,IAAMwB,MAAM,GAAGQ,UAAU,CAACC,MAAX,CAAkB;EAC/BR,gBAAgB,EAAE;IAChBS,SAAS,EAAE,YADK;IAEhBC,UAAU,EAAE,MAFI;IAGhBC,iBAAiB,EAAE;EAHH,CADa;EAM/BT,OAAO,EAAE;IACPU,eAAe,EAAE,OADV;IAEPC,eAAe,EAAE,CAFV;IAGPF,iBAAiB,EAAE,CAHZ;IAIPG,SAAS,EAAE,CAJJ;IAKPC,YAAY,EAAE;EALP;AANsB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}