{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { db } from \"../firebase\";\nimport { auth } from \"../firebase\";\nimport { collection, onSnapshot, query, where, deleteDoc, doc } from 'firebase/firestore';\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport { connect } from \"react-redux\";\nimport { get_Post } from \"../redux\";\nimport tw from 'tailwind-react-native-classnames';\nimport UpdatePost from \"./UpdatePost\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar MyPosts = function MyPosts() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var filterData = posts.filter(function (post) {\n    return post.description.indexOf(search) >= 0;\n  });\n  useEffect(function () {\n    var _auth$currentUser;\n\n    return onSnapshot(query(collection(db, 'Post'), where('uid', '==', (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid)), function (snapshot) {\n      return setPosts(snapshot.docs.map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id\n        });\n      }));\n    });\n  }, []);\n\n  var deletePost = function deletePost(post) {\n    deleteDoc(doc(db, 'Post', post.id));\n  };\n\n  var deleteAlert = function deleteAlert(item) {\n    Alert.alert(\"DELETION\", \"Are you sure you want to delete \" + item.description, [{\n      text: \"Delete\",\n      onPress: function onPress() {\n        return deletePost(item);\n      }\n    }, {\n      text: \"Cancel\",\n      style: \"cancel\"\n    }]);\n  };\n\n  var renderFriend = function renderFriend(_ref) {\n    var item = _ref.item;\n    return _jsx(View, {\n      style: {\n        flexDirection: 'row',\n        padding: 20,\n        marginBottom: 20,\n        backgroundColor: 'white',\n        borderRadius: 12,\n        shadowColor: '#000',\n        shadowOffset: {\n          width: 0,\n          height: 10\n        },\n        shadowOpacity: 0.3,\n        shadowRadius: 20\n      },\n      children: _jsxs(View, {\n        children: [_jsxs(Text, {\n          children: [\"Description: \", item.description]\n        }), _jsxs(Text, {\n          style: tw(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"mb-5\"]))),\n          children: [\"Contents: \", item.contents]\n        }), _jsx(UpdatePost, {\n          data: item\n        }), _jsx(TouchableOpacity, {\n          style: tw(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"bg-red-500  w-24 mt-5 border-solid rounded-full\"]))),\n          onPress: function onPress() {\n            return deleteAlert(item);\n          },\n          children: _jsx(Text, {\n            style: tw(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"text-center text-white \"]))),\n            children: \"Delete Post\"\n          })\n        })]\n      })\n    });\n  };\n\n  return _jsxs(View, {\n    children: [_jsxs(View, {\n      style: styles.searchWrapperStyle,\n      children: [_jsx(TextInput, {\n        style: styles.textInput,\n        value: search,\n        placeholder: \"Search By description\",\n        underlineColorAndroid: \"transparent\",\n        onChangeText: function onChangeText(text) {\n          return setSearch(text);\n        }\n      }), _jsx(MaterialCommunityIcons, {\n        style: styles.iconStyle,\n        name: \"backspace-outline\",\n        size: 23,\n        onPress: function onPress() {\n          setSearch('');\n        }\n      })]\n    }), _jsx(View, {\n      style: tw(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\"pb-52\"]))),\n      children: _jsx(FlatList, {\n        data: filterData,\n        contentContainerStyle: {\n          padding: 15\n        },\n        renderItem: renderFriend\n      })\n    })]\n  });\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getPost: function getPost(post) {\n      return dispatch(get_Post(post));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(MyPosts);\nvar styles = StyleSheet.create({\n  posts: {\n    marginTop: 10,\n    marginBottom: 30\n  },\n  textInput: {\n    height: 50,\n    borderWidth: 1,\n    paddingLeft: 20,\n    margin: 5,\n    flex: 1,\n    fontSize: 16,\n    paddingVertical: 8,\n    paddingHorizontal: 0,\n    marginBottom: 30,\n    borderColor: '#009688',\n    backgroundColor: 'white'\n  },\n  iconStyle: {\n    marginTop: 12,\n    marginHorizontal: 8\n  },\n  searchWrapperStyle: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  input: {\n    backgroundColor: 'white',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    borderRadius: 10,\n    marginTop: 5\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","db","auth","collection","onSnapshot","query","where","deleteDoc","doc","MaterialCommunityIcons","connect","get_Post","tw","UpdatePost","MyPosts","posts","setPosts","search","setSearch","filterData","filter","post","description","indexOf","currentUser","uid","snapshot","docs","map","data","id","deletePost","deleteAlert","item","Alert","alert","text","onPress","style","renderFriend","flexDirection","padding","marginBottom","backgroundColor","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","contents","styles","searchWrapperStyle","textInput","iconStyle","mapDispatchToProps","dispatch","getPost","StyleSheet","create","marginTop","borderWidth","paddingLeft","margin","flex","fontSize","paddingVertical","paddingHorizontal","borderColor","marginHorizontal","justifyContent","input"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/MyPosts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Text, View, FlatList, StyleSheet, TextInput, TouchableOpacity, Alert } from \"react-native\";\r\nimport { db } from '../firebase'\r\nimport { auth } from '../firebase'\r\nimport { collection, onSnapshot, query, where, deleteDoc, doc } from 'firebase/firestore' \r\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons'\r\nimport { connect } from \"react-redux\";\r\nimport { get_Post } from \"../redux\";\r\nimport tw from 'tailwind-react-native-classnames';\r\nimport UpdatePost from './UpdatePost';\r\nconst MyPosts = () => {\r\n    const [posts, setPosts] = useState([])\r\n    const [search, setSearch] = useState('')\r\n    const filterData = posts.filter((post) => {\r\n        return post.description.indexOf(search) >= 0\r\n    })\r\n\r\n\r\n    useEffect(  \r\n        () => \r\n          onSnapshot(query(collection(db, 'Post'), where('uid', '==', auth.currentUser?.uid)), (snapshot) => \r\n          setPosts(snapshot.docs.map((doc) => ({...doc.data(), id: doc.id})))\r\n        )\r\n      ,[])\r\n      \r\n      const deletePost = (post) => {\r\n        deleteDoc(doc(db, 'Post', post.id))\r\n      }\r\n\r\n      const deleteAlert = (item) => {\r\n        Alert.alert(\r\n          `DELETION`,\r\n          `Are you sure you want to delete ${item.description}`,\r\n          [\r\n            {\r\n              text: \"Delete\",\r\n              onPress: () => deletePost(item)\r\n            },\r\n            {\r\n              text: \"Cancel\",\r\n              style: \"cancel\"\r\n            }\r\n          ]\r\n        )\r\n      }\r\n      \r\n\r\n      const renderFriend = (({item}) => {\r\n        return (\r\n            <View style={{flexDirection: 'row', padding: 20, marginBottom: 20, backgroundColor:'white', borderRadius: 12,\r\n            shadowColor: '#000', shadowOffset: {width:0, height: 10}, shadowOpacity: 0.3, shadowRadius: 20\r\n            }}>\r\n            <View>\r\n                <Text>Description: {item.description}</Text>\r\n                <Text style={tw`mb-5`}>Contents: {item.contents}</Text>\r\n                <UpdatePost data={item}/>\r\n                <TouchableOpacity\r\n                style={tw`bg-red-500  w-24 mt-5 border-solid rounded-full`}\r\n                  onPress={() => deleteAlert(item)}\r\n                  >\r\n                  <Text style={tw`text-center text-white `}>Delete Post</Text>\r\n                </TouchableOpacity >\r\n            </View>\r\n        </View>\r\n        )\r\n    })\r\n\r\n  return (\r\n    <View>\r\n           <View style={styles.searchWrapperStyle}>\r\n                <TextInput \r\n                style={styles.textInput}\r\n                value={search}\r\n                placeholder='Search By description'\r\n                underlineColorAndroid='transparent'\r\n                onChangeText={(text) => setSearch(text)}\r\n                />\r\n                <MaterialCommunityIcons style={styles.iconStyle} name=\"backspace-outline\"  size={23}onPress={() => {\r\n                    setSearch('');\r\n                }} /> \r\n            </View>\r\n            <View style={tw`pb-52`}>\r\n                <FlatList \r\n                    data={filterData}\r\n                    contentContainerStyle={{\r\n                        padding: 15\r\n                    }}\r\n                    renderItem={renderFriend}\r\n                />\r\n            </View>\r\n    </View>\r\n\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getPost: (post) => dispatch(get_Post(post)),\r\n});\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(MyPosts);\r\n\r\nconst styles = StyleSheet.create({\r\n    posts: {\r\n        marginTop: 10,\r\n        marginBottom: 30\r\n    },\r\n    textInput: {\r\n        height: 50,\r\n        borderWidth: 1,\r\n        paddingLeft: 20,\r\n        margin: 5,\r\n        flex: 1,\r\n        fontSize: 16,\r\n        paddingVertical: 8,\r\n        paddingHorizontal: 0,\r\n        marginBottom: 30,\r\n        borderColor: '#009688',\r\n        backgroundColor: 'white',\r\n\r\n      },\r\n      iconStyle: {\r\n        marginTop: 12,\r\n        marginHorizontal: 8,\r\n      },\r\n      searchWrapperStyle: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n      },\r\n      input: {\r\n        backgroundColor: 'white',\r\n        paddingHorizontal: 15,\r\n        paddingVertical: 10,\r\n        borderRadius: 10,\r\n        marginTop: 5,\r\n      },\r\n})\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}