{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { StatusBar } from \"expo-status-bar\";\nimport * as React from \"react\";\nimport MapView, { Marker } from \"react-native-maps\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as Location from \"expo-location\";\nimport { db } from \"../firebase\";\nimport { collection, doc, getDocs } from \"firebase/firestore\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function MapScreen() {\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      markers = _React$useState2[0],\n      setMarkers = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      location = _React$useState4[0],\n      setLocation = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      errorMsg = _React$useState6[0],\n      setErrorMsg = _React$useState6[1];\n\n  var _React$useState7 = React.useState([]),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      marked = _React$useState8[0],\n      setMarked = _React$useState8[1];\n\n  var locationCollectionRef = collection(db, \"location\");\n\n  var onMapPress = function onMapPress(e) {\n    setMarked([].concat(_toConsumableArray(marked), [e.nativeEvent.coordinate]));\n    console.log(\"marked\", marked);\n  };\n\n  React.useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n          status = _yield$Location$reque.status;\n\n      if (status !== \"granted\") {\n        setErrorMsg(\"Permission to access location was denied\");\n        return;\n      }\n\n      var location = yield Location.getCurrentPositionAsync({});\n      setLocation(location);\n    })();\n\n    _asyncToGenerator(function* () {\n      var data = yield getDocs(locationCollectionRef);\n      setMarkers(data.docs.map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id\n        });\n      }));\n    })();\n\n    console.log(location);\n  }, []);\n\n  var mapMarker = function mapMarker() {\n    return markers == null ? void 0 : markers.map(function (pin) {\n      return _jsx(Marker, {\n        coordinate: {\n          latitude: pin.coords._lat,\n          longitude: pin.coords._long\n        }\n      }, pin.id);\n    });\n  };\n\n  var text = \"Waiting...\";\n  var lat;\n  var lon;\n\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    lat = location.coords.latitude;\n    lon = location.coords.longitude;\n  }\n\n  return _jsx(_Fragment, {\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [!location ? _jsx(Text, {\n        style: {\n          textAlign: \"center\"\n        },\n        children: text\n      }) : _jsxs(MapView, {\n        style: styles.map,\n        showsUserLocation: true,\n        initialRegion: {\n          latitude: lat,\n          longitude: lon,\n          latitudeDelta: 0.0922,\n          longitudeDelta: 0.0421\n        },\n        onPress: function onPress(e) {\n          return onMapPress(e);\n        },\n        children: [!marked ? null : marked.map(function (mark, index) {\n          return _jsx(Marker, {\n            coordinate: {\n              latitude: mark.latitude,\n              longitude: mark.longitude\n            }\n          }, index);\n        }), mapMarker()]\n      }), _jsx(StatusBar, {\n        style: \"auto\"\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  map: {\n    width: Dimensions.get(\"window\").width,\n    height: Dimensions.get(\"window\").height\n  },\n  pin: {\n    width: 40,\n    height: 40,\n    borderTopRightRadius: 400,\n    borderBottomLeftRadius: 400,\n    borderBottomRightRadius: 400,\n    borderTopLeftRadius: 400\n  }\n});","map":{"version":3,"names":["StatusBar","React","MapView","Marker","Location","db","collection","doc","getDocs","MapScreen","useState","markers","setMarkers","location","setLocation","errorMsg","setErrorMsg","marked","setMarked","locationCollectionRef","onMapPress","e","nativeEvent","coordinate","console","log","useEffect","requestForegroundPermissionsAsync","status","getCurrentPositionAsync","data","docs","map","id","mapMarker","pin","latitude","coords","_lat","longitude","_long","text","lat","lon","styles","container","textAlign","latitudeDelta","longitudeDelta","mark","index","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","width","Dimensions","get","height","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/Map.js"],"sourcesContent":["import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport MapView, { Marker } from \"react-native-maps\";\r\nimport { Dimensions, StyleSheet, Text, View, Image } from \"react-native\";\r\nimport * as Location from \"expo-location\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, doc, getDocs } from \"firebase/firestore\";\r\n\r\nexport default function MapScreen() {\r\n  const [markers, setMarkers] = React.useState([]);\r\n  const [location, setLocation] = React.useState(null);\r\n  const [errorMsg, setErrorMsg] = React.useState(null);\r\n  const [marked, setMarked] = React.useState([]);\r\n\r\n  const locationCollectionRef = collection(db, \"location\");\r\n\r\n  const onMapPress = (e) => {\r\n    setMarked([...marked, e.nativeEvent.coordinate]);\r\n    console.log(\"marked\", marked);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      let { status } = await Location.requestForegroundPermissionsAsync();\r\n      if (status !== \"granted\") {\r\n        setErrorMsg(\"Permission to access location was denied\");\r\n        return;\r\n      }\r\n      let location = await Location.getCurrentPositionAsync({});\r\n      setLocation(location);\r\n    })();\r\n\r\n    (async () => {\r\n      const data = await getDocs(locationCollectionRef);\r\n      setMarkers(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    })();\r\n    console.log(location);\r\n  }, []);\r\n\r\n  const mapMarker = () => {\r\n    return markers?.map((pin) => (\r\n      <Marker\r\n        key={pin.id}\r\n        coordinate={{ latitude: pin.coords._lat, longitude: pin.coords._long }}\r\n      ></Marker>\r\n    ));\r\n  };\r\n\r\n  let text = \"Waiting...\";\r\n  let lat;\r\n  let lon;\r\n\r\n  if (errorMsg) {\r\n    text = errorMsg;\r\n  } else if (location) {\r\n    lat = location.coords.latitude;\r\n    lon = location.coords.longitude;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <View style={styles.container}>\r\n        {!location ? (\r\n          <Text style={{ textAlign: \"center\" }}>{text}</Text>\r\n        ) : (\r\n          <MapView\r\n            style={styles.map}\r\n            showsUserLocation={true}\r\n            initialRegion={{\r\n              latitude: lat,\r\n              longitude: lon,\r\n              latitudeDelta: 0.0922,\r\n              longitudeDelta: 0.0421,\r\n            }}\r\n            onPress={(e) => onMapPress(e)}\r\n          >\r\n            {!marked\r\n              ? null\r\n              : marked.map((mark, index) => (\r\n                  <Marker\r\n                    key={index}\r\n                    coordinate={{\r\n                      latitude: mark.latitude,\r\n                      longitude: mark.longitude,\r\n                    }}\r\n                  />\r\n                ))}\r\n            {mapMarker()}\r\n          </MapView>\r\n        )}\r\n        <StatusBar style=\"auto\" />\r\n      </View>\r\n    </>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  map: {\r\n    width: Dimensions.get(\"window\").width,\r\n    height: Dimensions.get(\"window\").height,\r\n  },\r\n  pin: {\r\n    width: 40,\r\n    height: 40,\r\n    borderTopRightRadius: 400,\r\n    borderBottomLeftRadius: 400,\r\n    borderBottomRightRadius: 400,\r\n    borderTopLeftRadius: 400,\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}