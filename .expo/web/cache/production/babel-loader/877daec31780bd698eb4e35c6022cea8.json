{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import{db}from\"../firebase\";import{auth}from\"../firebase\";import{collection,onSnapshot,query,where,addDoc,getDocs}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Input(_ref){var commentId=_ref.commentId;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),displayName=_useState4[0],setDisplayName=_useState4[1];var submit=function submit(){addDoc(collection(db,\"Comments\"),{commentId:commentId,timestamp:Date.now(),content:displayName+\": \"+text}).then(function(){setText(\"\");}).catch(function(error){return alert(error.message);});};if(!displayName){var _auth$currentUser;getDocs(query(collection(db,\"users\"),where(\"uid\",\"==\",(_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.uid))).then(function(user){console.log(\"Grabbing Username\"),setDisplayName(user.docs[0].data().name);});}return _jsx(KeyboardAvoidingView,{behavior:\"position\",children:_jsxs(View,{style:styles.container,children:[_jsx(TextInput,{placeholder:\"add a comment\",keyboardType:\"twitter\",style:styles.input,autoFocus:true,value:text,onChangeText:function onChangeText(text){return setText(text);}}),_jsx(TouchableOpacity,{style:styles.button,onPress:submit,children:_jsx(Text,{style:[styles.text,!text?styles.inactive:[]],children:\"Post\"})})]})});}var styles=StyleSheet.create({container:{backgroundColor:\"#FFF\",flexDirection:\"row\",borderTopWidth:1,borderColor:\"#EEE\",alignItems:\"center\",paddingLeft:15},button:{height:40,paddingHorizontal:20,alignItems:\"center\",justifyContent:\"center\"},input:{flex:1,height:40,fontSize:15},inactive:{color:\"#CCC\"},text:{color:\"#3F51B5\",fontWeight:\"bold\",fontFamily:\"Avenir\",textAlign:\"center\",fontSize:15}});","map":{"version":3,"names":["React","useEffect","useState","db","auth","collection","onSnapshot","query","where","addDoc","getDocs","Input","commentId","text","setText","displayName","setDisplayName","submit","timestamp","Date","now","content","then","catch","error","alert","message","currentUser","uid","user","console","log","docs","data","name","styles","container","input","button","inactive","StyleSheet","create","backgroundColor","flexDirection","borderTopWidth","borderColor","alignItems","paddingLeft","height","paddingHorizontal","justifyContent","flex","fontSize","color","fontWeight","fontFamily","textAlign"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/Input.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  TextInput,\r\n  Text,\r\n  View,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n} from \"react-native\";\r\nimport { db } from \"../firebase\";\r\nimport { auth } from \"../firebase\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\n\r\nexport default function Input({ commentId }) {\r\n  const [text, setText] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n\r\n  const submit = () => {\r\n    addDoc(collection(db, \"Comments\"), {\r\n      commentId,\r\n      timestamp: Date.now(),\r\n      content: `${displayName}: ${text}`,\r\n    })\r\n      .then(() => {\r\n        setText(\"\");\r\n      })\r\n      .catch((error) => alert(error.message));\r\n  };\r\n\r\n  if (!displayName) {\r\n    getDocs(\r\n      query(collection(db, \"users\"), where(\"uid\", \"==\", auth.currentUser?.uid))\r\n    ).then((user) => {\r\n      console.log(\"Grabbing Username\"),\r\n        setDisplayName(user.docs[0].data().name);\r\n    });\r\n  }\r\n  return (\r\n    <KeyboardAvoidingView behavior=\"position\">\r\n      <View style={styles.container}>\r\n        <TextInput\r\n          placeholder=\"add a comment\"\r\n          keyboardType=\"twitter\"\r\n          style={styles.input}\r\n          autoFocus={true}\r\n          value={text}\r\n          onChangeText={(text) => setText(text)}\r\n        />\r\n        <TouchableOpacity style={styles.button} onPress={submit}>\r\n          <Text style={[styles.text, !text ? styles.inactive : []]}>Post</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#FFF\",\r\n    flexDirection: \"row\",\r\n    borderTopWidth: 1,\r\n    borderColor: \"#EEE\",\r\n    alignItems: \"center\",\r\n    paddingLeft: 15,\r\n  },\r\n  button: {\r\n    height: 40,\r\n    paddingHorizontal: 20,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    height: 40,\r\n    fontSize: 15,\r\n  },\r\n  inactive: {\r\n    color: \"#CCC\",\r\n  },\r\n  text: {\r\n    color: \"#3F51B5\",\r\n    fontWeight: \"bold\",\r\n    fontFamily: \"Avenir\",\r\n    textAlign: \"center\",\r\n    fontSize: 15,\r\n  },})"],"mappings":"iEAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,C,4YASA,OAASC,EAAT,mBACA,OAASC,IAAT,mBACA,OACEC,UADF,CAEEC,UAFF,CAGEC,KAHF,CAIEC,KAJF,CAKEC,MALF,CAMEC,OANF,KAOO,oBAPP,C,wFASA,cAAe,SAASC,MAAT,MAA8B,IAAbC,UAAa,MAAbA,SAAa,CAC3C,cAAwBV,QAAQ,CAAC,EAAD,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eACA,eAAsCZ,QAAQ,CAAC,EAAD,CAA9C,yCAAOa,WAAP,eAAoBC,cAApB,eAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnBR,MAAM,CAACJ,UAAU,CAACF,EAAD,CAAK,UAAL,CAAX,CAA6B,CACjCS,SAAS,CAATA,SADiC,CAEjCM,SAAS,CAAEC,IAAI,CAACC,GAAL,EAFsB,CAGjCC,OAAO,CAAKN,WAAL,MAAqBF,IAHK,CAA7B,CAAN,CAKGS,IALH,CAKQ,UAAM,CACVR,OAAO,CAAC,EAAD,CAAP,CACD,CAPH,EAQGS,KARH,CAQS,SAACC,KAAD,QAAWC,MAAK,CAACD,KAAK,CAACE,OAAP,CAAhB,EART,EASD,CAVD,CAYA,GAAI,CAACX,WAAL,CAAkB,uBAChBL,OAAO,CACLH,KAAK,CAACF,UAAU,CAACF,EAAD,CAAK,OAAL,CAAX,CAA0BK,KAAK,CAAC,KAAD,CAAQ,IAAR,oBAAcJ,IAAI,CAACuB,WAAnB,eAAc,kBAAkBC,GAAhC,CAA/B,CADA,CAAP,CAEEN,IAFF,CAEO,SAACO,IAAD,CAAU,CACfC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACEf,cAAc,CAACa,IAAI,CAACG,IAAL,CAAU,CAAV,EAAaC,IAAb,GAAoBC,IAArB,CADhB,CAED,CALD,EAMD,CACD,MACE,MAAC,oBAAD,EAAsB,QAAQ,CAAC,UAA/B,UACE,MAAC,IAAD,EAAM,KAAK,CAAEC,MAAM,CAACC,SAApB,WACE,KAAC,SAAD,EACE,WAAW,CAAC,eADd,CAEE,YAAY,CAAC,SAFf,CAGE,KAAK,CAAED,MAAM,CAACE,KAHhB,CAIE,SAAS,CAAE,IAJb,CAKE,KAAK,CAAExB,IALT,CAME,YAAY,CAAE,sBAACA,IAAD,QAAUC,QAAO,CAACD,IAAD,CAAjB,EANhB,EADF,CASE,KAAC,gBAAD,EAAkB,KAAK,CAAEsB,MAAM,CAACG,MAAhC,CAAwC,OAAO,CAAErB,MAAjD,UACE,KAAC,IAAD,EAAM,KAAK,CAAE,CAACkB,MAAM,CAACtB,IAAR,CAAc,CAACA,IAAD,CAAQsB,MAAM,CAACI,QAAf,CAA0B,EAAxC,CAAb,kBADF,EATF,GADF,EADF,CAiBD,CAED,GAAMJ,OAAM,CAAGK,UAAU,CAACC,MAAX,CAAkB,CAC/BL,SAAS,CAAE,CACTM,eAAe,CAAE,MADR,CAETC,aAAa,CAAE,KAFN,CAGTC,cAAc,CAAE,CAHP,CAITC,WAAW,CAAE,MAJJ,CAKTC,UAAU,CAAE,QALH,CAMTC,WAAW,CAAE,EANJ,CADoB,CAS/BT,MAAM,CAAE,CACNU,MAAM,CAAE,EADF,CAENC,iBAAiB,CAAE,EAFb,CAGNH,UAAU,CAAE,QAHN,CAINI,cAAc,CAAE,QAJV,CATuB,CAe/Bb,KAAK,CAAE,CACLc,IAAI,CAAE,CADD,CAELH,MAAM,CAAE,EAFH,CAGLI,QAAQ,CAAE,EAHL,CAfwB,CAoB/Bb,QAAQ,CAAE,CACRc,KAAK,CAAE,MADC,CApBqB,CAuB/BxC,IAAI,CAAE,CACJwC,KAAK,CAAE,SADH,CAEJC,UAAU,CAAE,MAFR,CAGJC,UAAU,CAAE,QAHR,CAIJC,SAAS,CAAE,QAJP,CAKJJ,QAAQ,CAAE,EALN,CAvByB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}