{"ast":null,"code":"import _taggedTemplateLiteralLoose from\"@babel/runtime/helpers/taggedTemplateLiteralLoose\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useEffect,useState}from'react';import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Alert from\"react-native-web/dist/exports/Alert\";import{db}from\"../firebase\";import{auth}from\"../firebase\";import{collection,onSnapshot,query,where,deleteDoc,doc}from'firebase/firestore';import MaterialCommunityIcons from\"@expo/vector-icons/MaterialCommunityIcons\";import{connect}from\"react-redux\";import{get_Post}from\"../redux\";import tw from'tailwind-react-native-classnames';import UpdatePost from\"./UpdatePost\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var MyPosts=function MyPosts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var filterData=posts.filter(function(post){return post.description.indexOf(search)>=0;});useEffect(function(){var _auth$currentUser;return onSnapshot(query(collection(db,'Post'),where('uid','==',(_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.uid)),function(snapshot){return setPosts(snapshot.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));});},[]);var deletePost=function deletePost(post){deleteDoc(doc(db,'Post',post.id));};var deleteAlert=function deleteAlert(item){Alert.alert(\"DELETION\",\"Are you sure you want to delete \"+item.description,[{text:\"Delete\",onPress:function onPress(){return deletePost(item);}},{text:\"Cancel\",style:\"cancel\"}]);};var renderFriend=function renderFriend(_ref){var item=_ref.item;return _jsx(View,{style:{flexDirection:'row',padding:20,marginBottom:20,backgroundColor:'white',borderRadius:12,shadowColor:'#000',shadowOffset:{width:0,height:10},shadowOpacity:0.3,shadowRadius:20},children:_jsxs(View,{children:[_jsxs(Text,{children:[\"Description: \",item.description]}),_jsxs(Text,{style:tw(_templateObject||(_templateObject=_taggedTemplateLiteralLoose([\"mb-5\"]))),children:[\"Contents: \",item.contents]}),_jsx(UpdatePost,{data:item}),_jsx(TouchableOpacity,{style:tw(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose([\"bg-red-500  w-24 mt-5 border-solid rounded-full\"]))),onPress:function onPress(){return deleteAlert(item);},children:_jsx(Text,{style:tw(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose([\"text-center text-white \"]))),children:\"Delete Post\"})})]})});};return _jsxs(View,{children:[_jsxs(View,{style:styles.searchWrapperStyle,children:[_jsx(TextInput,{style:styles.textInput,value:search,placeholder:\"Search By description\",underlineColorAndroid:\"transparent\",onChangeText:function onChangeText(text){return setSearch(text);}}),_jsx(MaterialCommunityIcons,{style:styles.iconStyle,name:\"backspace-outline\",size:23,onPress:function onPress(){setSearch('');}})]}),_jsx(View,{style:tw(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose([\"pb-52\"]))),children:_jsx(FlatList,{data:filterData,contentContainerStyle:{padding:15},renderItem:renderFriend})})]});};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getPost:function getPost(post){return dispatch(get_Post(post));}};};export default connect(null,mapDispatchToProps)(MyPosts);var styles=StyleSheet.create({posts:{marginTop:10,marginBottom:30},textInput:{height:50,borderWidth:1,paddingLeft:20,margin:5,flex:1,fontSize:16,paddingVertical:8,paddingHorizontal:0,marginBottom:30,borderColor:'#009688',backgroundColor:'white'},iconStyle:{marginTop:12,marginHorizontal:8},searchWrapperStyle:{flexDirection:\"row\",justifyContent:\"space-between\"},input:{backgroundColor:'white',paddingHorizontal:15,paddingVertical:10,borderRadius:10,marginTop:5}});","map":{"version":3,"names":["React","useEffect","useState","db","auth","collection","onSnapshot","query","where","deleteDoc","doc","MaterialCommunityIcons","connect","get_Post","tw","UpdatePost","MyPosts","posts","setPosts","search","setSearch","filterData","filter","post","description","indexOf","currentUser","uid","snapshot","docs","map","data","id","deletePost","deleteAlert","item","Alert","alert","text","onPress","style","renderFriend","flexDirection","padding","marginBottom","backgroundColor","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","contents","styles","searchWrapperStyle","textInput","iconStyle","mapDispatchToProps","dispatch","getPost","StyleSheet","create","marginTop","borderWidth","paddingLeft","margin","flex","fontSize","paddingVertical","paddingHorizontal","borderColor","marginHorizontal","justifyContent","input"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/MyPosts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Text, View, FlatList, StyleSheet, TextInput, TouchableOpacity, Alert } from \"react-native\";\r\nimport { db } from '../firebase'\r\nimport { auth } from '../firebase'\r\nimport { collection, onSnapshot, query, where, deleteDoc, doc } from 'firebase/firestore' \r\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons'\r\nimport { connect } from \"react-redux\";\r\nimport { get_Post } from \"../redux\";\r\nimport tw from 'tailwind-react-native-classnames';\r\nimport UpdatePost from './UpdatePost';\r\nconst MyPosts = () => {\r\n    const [posts, setPosts] = useState([])\r\n    const [search, setSearch] = useState('')\r\n    const filterData = posts.filter((post) => {\r\n        return post.description.indexOf(search) >= 0\r\n    })\r\n\r\n\r\n    useEffect(  \r\n        () => \r\n          onSnapshot(query(collection(db, 'Post'), where('uid', '==', auth.currentUser?.uid)), (snapshot) => \r\n          setPosts(snapshot.docs.map((doc) => ({...doc.data(), id: doc.id})))\r\n        )\r\n      ,[])\r\n      \r\n      const deletePost = (post) => {\r\n        deleteDoc(doc(db, 'Post', post.id))\r\n      }\r\n\r\n      const deleteAlert = (item) => {\r\n        Alert.alert(\r\n          `DELETION`,\r\n          `Are you sure you want to delete ${item.description}`,\r\n          [\r\n            {\r\n              text: \"Delete\",\r\n              onPress: () => deletePost(item)\r\n            },\r\n            {\r\n              text: \"Cancel\",\r\n              style: \"cancel\"\r\n            }\r\n          ]\r\n        )\r\n      }\r\n      \r\n\r\n      const renderFriend = (({item}) => {\r\n        return (\r\n            <View style={{flexDirection: 'row', padding: 20, marginBottom: 20, backgroundColor:'white', borderRadius: 12,\r\n            shadowColor: '#000', shadowOffset: {width:0, height: 10}, shadowOpacity: 0.3, shadowRadius: 20\r\n            }}>\r\n            <View>\r\n                <Text>Description: {item.description}</Text>\r\n                <Text style={tw`mb-5`}>Contents: {item.contents}</Text>\r\n                <UpdatePost data={item}/>\r\n                <TouchableOpacity\r\n                style={tw`bg-red-500  w-24 mt-5 border-solid rounded-full`}\r\n                  onPress={() => deleteAlert(item)}\r\n                  >\r\n                  <Text style={tw`text-center text-white `}>Delete Post</Text>\r\n                </TouchableOpacity >\r\n            </View>\r\n        </View>\r\n        )\r\n    })\r\n\r\n  return (\r\n    <View>\r\n           <View style={styles.searchWrapperStyle}>\r\n                <TextInput \r\n                style={styles.textInput}\r\n                value={search}\r\n                placeholder='Search By description'\r\n                underlineColorAndroid='transparent'\r\n                onChangeText={(text) => setSearch(text)}\r\n                />\r\n                <MaterialCommunityIcons style={styles.iconStyle} name=\"backspace-outline\"  size={23}onPress={() => {\r\n                    setSearch('');\r\n                }} /> \r\n            </View>\r\n            <View style={tw`pb-52`}>\r\n                <FlatList \r\n                    data={filterData}\r\n                    contentContainerStyle={{\r\n                        padding: 15\r\n                    }}\r\n                    renderItem={renderFriend}\r\n                />\r\n            </View>\r\n    </View>\r\n\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getPost: (post) => dispatch(get_Post(post)),\r\n});\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(MyPosts);\r\n\r\nconst styles = StyleSheet.create({\r\n    posts: {\r\n        marginTop: 10,\r\n        marginBottom: 30\r\n    },\r\n    textInput: {\r\n        height: 50,\r\n        borderWidth: 1,\r\n        paddingLeft: 20,\r\n        margin: 5,\r\n        flex: 1,\r\n        fontSize: 16,\r\n        paddingVertical: 8,\r\n        paddingHorizontal: 0,\r\n        marginBottom: 30,\r\n        borderColor: '#009688',\r\n        backgroundColor: 'white',\r\n\r\n      },\r\n      iconStyle: {\r\n        marginTop: 12,\r\n        marginHorizontal: 8,\r\n      },\r\n      searchWrapperStyle: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n      },\r\n      input: {\r\n        backgroundColor: 'white',\r\n        paddingHorizontal: 15,\r\n        paddingVertical: 10,\r\n        borderRadius: 10,\r\n        marginTop: 5,\r\n      },\r\n})\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}