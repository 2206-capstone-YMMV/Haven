{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Alert from\"react-native-web/dist/exports/Alert\";import React,{useEffect,useState}from'react';import{auth}from\"../firebase\";import{useNavigation}from'@react-navigation/core';import{db}from\"../firebase\";import{collection,onSnapshot,query,where,updateDoc,doc}from'firebase/firestore';import DropDownPicker from\"react-native-dropdown-picker\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=function EditProfile(){var navigation=useNavigation();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var _useState7=useState([{label:\"User\",value:\"user\"},{label:\"Helper\",value:\"helper\"}]),_useState8=_slicedToArray(_useState7,2),items=_useState8[0],setItems=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),id=_useState10[0],setId=_useState10[1];var colRef=collection(db,'users');useEffect(function(){var _auth$currentUser;return onSnapshot(query(colRef,where('uid','==',(_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.uid)),function(snapshot){console.log('Grabbing Profile data');var user=snapshot.docs[0].data();setName(user.name);setRole(user.role);setId(snapshot.docs[0].id);});},[]);var Edit=function Edit(){updateDoc(doc(db,'users',id),{name:name,role:role}).then(navigation.navigate('Profile'));};var editAlert=function editAlert(){Alert.alert(\"Is this edit ok?\",\"Name: \"+name+\", Role: \"+role,[{text:\"Submit\",onPress:function onPress(){return Edit();}},{text:\"Cancel\",style:\"cancel\"}]);};return _jsxs(View,{style:styles.container,children:[_jsx(TextInput,{style:styles.input,placeholder:\"Full Name\",onChangeText:function onChangeText(text){return setName(text);}}),_jsx(DropDownPicker,{open:open,value:role,items:items,setOpen:setOpen,setValue:setRole,setItems:setItems}),_jsx(TouchableOpacity,{onPress:editAlert,style:[styles.button],children:_jsx(Text,{style:styles.buttonOutLineText,children:\"Edit Profile\"})})]});};export default EditProfile;var styles=StyleSheet.create({input:{backgroundColor:'white',paddingHorizontal:15,paddingVertical:10,borderRadius:10,marginTop:5},button:{backgroundColor:'#0782F9',width:'100%',padding:15,borderRadius:10,alignItems:'center',marginTop:5},buttonOutline:{backgroundColor:'white',marginTop:5,borderColor:'#0782F9',borderWidth:2},container:{paddingTop:'80%'}});","map":{"version":3,"names":["React","useEffect","useState","auth","useNavigation","db","collection","onSnapshot","query","where","updateDoc","doc","DropDownPicker","EditProfile","navigation","name","setName","open","setOpen","role","setRole","label","value","items","setItems","id","setId","colRef","currentUser","uid","snapshot","console","log","user","docs","data","Edit","then","navigate","editAlert","Alert","alert","text","onPress","style","styles","container","input","button","buttonOutLineText","StyleSheet","create","backgroundColor","paddingHorizontal","paddingVertical","borderRadius","marginTop","width","padding","alignItems","buttonOutline","borderColor","borderWidth","paddingTop"],"sources":["C:/Users/16476/Documents/GitHub/Haven/screens/EditProfile.js"],"sourcesContent":["import { StyleSheet, Text, View, TextInput, TouchableOpacity, Alert } from 'react-native'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { auth } from '../firebase'\r\nimport { useNavigation } from '@react-navigation/core'\r\nimport { db } from '../firebase'\r\nimport { collection, onSnapshot, query, where, updateDoc, doc} from 'firebase/firestore' \r\nimport DropDownPicker from \"react-native-dropdown-picker\";\r\n\r\nconst EditProfile = () => {\r\n    const navigation = useNavigation()\r\n\r\n    const [name, setName] = useState('')\r\n    const [open, setOpen] = useState(false);\r\n    const [role, setRole] = useState(\"\");\r\n    const [items, setItems] = useState([\r\n      { label: \"User\", value: \"user\" },\r\n      { label: \"Helper\", value: \"helper\" },\r\n    ]);\r\n    const [id, setId] = useState('')\r\n    const colRef = collection(db, 'users')\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(query(colRef, where('uid', '==', auth.currentUser?.uid)), (snapshot) => {\r\n            console.log('Grabbing Profile data')\r\n            let user = snapshot.docs[0].data()\r\n            setName(user.name)\r\n            setRole(user.role)\r\n            setId(snapshot.docs[0].id)\r\n        })\r\n    ,[])\r\n\r\n    const Edit = () => {\r\n        updateDoc(doc(db, 'users', id), {name, role})\r\n        .then(navigation.navigate('Profile'))\r\n    }\r\n\r\n    const editAlert = () => {\r\n      Alert.alert(\r\n        `Is this edit ok?`,\r\n        `Name: ${name}, Role: ${role}`,\r\n        [\r\n          {\r\n            text: \"Submit\",\r\n            onPress: () => Edit()\r\n          },\r\n          {\r\n            text: \"Cancel\",\r\n            style: \"cancel\"\r\n          }\r\n        ]\r\n      )\r\n    }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n\r\n        <TextInput style={styles.input} placeholder=\"Full Name\" onChangeText={text => setName(text)} />\r\n        <DropDownPicker\r\n        open={open}\r\n        value={role}\r\n        items={items}\r\n        setOpen={setOpen}\r\n        setValue={setRole}\r\n        setItems={setItems}\r\n      />\r\n\r\n        <TouchableOpacity\r\n            onPress={editAlert}\r\n            style={[styles.button]}\r\n        >\r\n            <Text style={styles.buttonOutLineText}>Edit Profile</Text>\r\n        </TouchableOpacity>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default EditProfile\r\n\r\nconst styles = StyleSheet.create({\r\n    input: {\r\n      backgroundColor: 'white',\r\n      paddingHorizontal: 15,\r\n      paddingVertical: 10,\r\n      borderRadius: 10,\r\n      marginTop: 5,\r\n    },\r\n    button: {\r\n      backgroundColor: '#0782F9',\r\n      width: '100%',\r\n      padding: 15,\r\n      borderRadius: 10,\r\n      alignItems: 'center',\r\n      marginTop: 5\r\n    },\r\n    buttonOutline: {\r\n      backgroundColor: 'white',\r\n      marginTop: 5,\r\n      borderColor: '#0782F9',\r\n      borderWidth: 2,\r\n    },\r\n    container: {\r\n      paddingTop: '80%'\r\n    }\r\n  })"],"mappings":"+aACA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,mBACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,EAAT,mBACA,OAASC,UAAT,CAAqBC,UAArB,CAAiCC,KAAjC,CAAwCC,KAAxC,CAA+CC,SAA/C,CAA0DC,GAA1D,KAAoE,oBAApE,CACA,MAAOC,eAAP,KAA2B,8BAA3B,C,wFAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACtB,GAAMC,WAAU,CAAGV,aAAa,EAAhC,CAEA,cAAwBF,QAAQ,CAAC,EAAD,CAAhC,wCAAOa,IAAP,eAAaC,OAAb,eACA,eAAwBd,QAAQ,CAAC,KAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eACA,eAAwBhB,QAAQ,CAAC,EAAD,CAAhC,yCAAOiB,IAAP,eAAaC,OAAb,eACA,eAA0BlB,QAAQ,CAAC,CACjC,CAAEmB,KAAK,CAAE,MAAT,CAAiBC,KAAK,CAAE,MAAxB,CADiC,CAEjC,CAAED,KAAK,CAAE,QAAT,CAAmBC,KAAK,CAAE,QAA1B,CAFiC,CAAD,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eAIA,eAAoBtB,QAAQ,CAAC,EAAD,CAA5B,0CAAOuB,EAAP,gBAAWC,KAAX,gBACA,GAAMC,OAAM,CAAGrB,UAAU,CAACD,EAAD,CAAK,OAAL,CAAzB,CAEAJ,SAAS,CACL,uCACIM,WAAU,CAACC,KAAK,CAACmB,MAAD,CAASlB,KAAK,CAAC,KAAD,CAAQ,IAAR,oBAAcN,IAAI,CAACyB,WAAnB,eAAc,kBAAkBC,GAAhC,CAAd,CAAN,CAA2D,SAACC,QAAD,CAAc,CACnFC,OAAO,CAACC,GAAR,CAAY,uBAAZ,EACA,GAAIC,KAAI,CAAGH,QAAQ,CAACI,IAAT,CAAc,CAAd,EAAiBC,IAAjB,EAAX,CACAnB,OAAO,CAACiB,IAAI,CAAClB,IAAN,CAAP,CACAK,OAAO,CAACa,IAAI,CAACd,IAAN,CAAP,CACAO,KAAK,CAACI,QAAQ,CAACI,IAAT,CAAc,CAAd,EAAiBT,EAAlB,CAAL,CACH,CANa,CADd,EADK,CASR,EATQ,CAAT,CAWA,GAAMW,KAAI,CAAG,QAAPA,KAAO,EAAM,CACf1B,SAAS,CAACC,GAAG,CAACN,EAAD,CAAK,OAAL,CAAcoB,EAAd,CAAJ,CAAuB,CAACV,IAAI,CAAJA,IAAD,CAAOI,IAAI,CAAJA,IAAP,CAAvB,CAAT,CACCkB,IADD,CACMvB,UAAU,CAACwB,QAAX,CAAoB,SAApB,CADN,EAEH,CAHD,CAKA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtBC,KAAK,CAACC,KAAN,6BAEW1B,IAFX,YAE0BI,IAF1B,CAGE,CACE,CACEuB,IAAI,CAAE,QADR,CAEEC,OAAO,CAAE,yBAAMP,KAAI,EAAV,EAFX,CADF,CAKE,CACEM,IAAI,CAAE,QADR,CAEEE,KAAK,CAAE,QAFT,CALF,CAHF,EAcD,CAfD,CAiBF,MACE,OAAC,IAAD,EAAM,KAAK,CAAEC,MAAM,CAACC,SAApB,WAEI,KAAC,SAAD,EAAW,KAAK,CAAED,MAAM,CAACE,KAAzB,CAAgC,WAAW,CAAC,WAA5C,CAAwD,YAAY,CAAE,sBAAAL,IAAI,QAAI1B,QAAO,CAAC0B,IAAD,CAAX,EAA1E,EAFJ,CAGI,KAAC,cAAD,EACA,IAAI,CAAEzB,IADN,CAEA,KAAK,CAAEE,IAFP,CAGA,KAAK,CAAEI,KAHP,CAIA,OAAO,CAAEL,OAJT,CAKA,QAAQ,CAAEE,OALV,CAMA,QAAQ,CAAEI,QANV,EAHJ,CAYI,KAAC,gBAAD,EACI,OAAO,CAAEe,SADb,CAEI,KAAK,CAAE,CAACM,MAAM,CAACG,MAAR,CAFX,UAII,KAAC,IAAD,EAAM,KAAK,CAAEH,MAAM,CAACI,iBAApB,0BAJJ,EAZJ,GADF,CAqBD,CAnED,CAqEA,cAAepC,YAAf,CAEA,GAAMgC,OAAM,CAAGK,UAAU,CAACC,MAAX,CAAkB,CAC7BJ,KAAK,CAAE,CACLK,eAAe,CAAE,OADZ,CAELC,iBAAiB,CAAE,EAFd,CAGLC,eAAe,CAAE,EAHZ,CAILC,YAAY,CAAE,EAJT,CAKLC,SAAS,CAAE,CALN,CADsB,CAQ7BR,MAAM,CAAE,CACNI,eAAe,CAAE,SADX,CAENK,KAAK,CAAE,MAFD,CAGNC,OAAO,CAAE,EAHH,CAINH,YAAY,CAAE,EAJR,CAKNI,UAAU,CAAE,QALN,CAMNH,SAAS,CAAE,CANL,CARqB,CAgB7BI,aAAa,CAAE,CACbR,eAAe,CAAE,OADJ,CAEbI,SAAS,CAAE,CAFE,CAGbK,WAAW,CAAE,SAHA,CAIbC,WAAW,CAAE,CAJA,CAhBc,CAsB7BhB,SAAS,CAAE,CACTiB,UAAU,CAAE,KADH,CAtBkB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}